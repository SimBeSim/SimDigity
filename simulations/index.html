<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <title>SimDigity | 3D Flight Validation</title>
    <style>
        body { margin: 0; background-color: #FFF; overflow: hidden; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; height: 100vh; }
        canvas { display: block; position: fixed; top: 0; left: 0; z-index: 1; }
        
        #ui { position: absolute; top: 20px; left: 20px; color: #333; z-index: 10; pointer-events: none; }
        
        #controls {
            position: absolute; top: 20px; right: 20px; 
            background: rgba(255, 255, 255, 0.95); 
            padding: 20px; border-radius: 12px; 
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
            width: 280px; color: #333; z-index: 10;
            max-height: 90vh; overflow-y: auto;
        }

        #controls h3 { margin: 0 0 15px 0; font-size: 1.2em; color: #000; border-bottom: 2px solid #eee; padding-bottom: 5px; }
        #controls h4 { margin: 15px 0 8px 0; font-size: 0.95em; color: #444; text-transform: uppercase; letter-spacing: 1px; }
        .control-group { margin-bottom: 12px; }
        .control-group label { display: flex; justify-content: space-between; font-size: 0.85em; margin-bottom: 5px; font-weight: 600; }
        .control-group label span { color: #007bff; }
        input[type=range] { width: 100%; cursor: pointer; accent-color: #007bff; }
    </style>
</head>
<body>

    <div id="ui">
        <h1>SimDigity</h1>
        <p>Project: WTC Fysica Validatie</p>
        <p>Status: Interactieve Inspectie</p>
    </div>

    <div id="controls">
        <h3>Dashboard</h3>
        
        <div class="control-group">
            <label>Camera Snelheid</label>
            <input type="range" id="speedSlider" min="0" max="0.01" step="0.0001" value="0.002">
        </div>

        <h4>Vliegtuig 1 (Noord)</h4>
        <div class="control-group">
            <label>Positie X <span>(N/Z)</span></label>
            <input type="range" id="p1x" min="-150" max="150" value="-60">
        </div>
        <div class="control-group">
            <label>Hoogte Y <span>(Altitude)</span></label>
            <input type="range" id="p1y" min="0" max="100" value="38">
        </div>
        <div class="control-group">
            <label>Positie Z <span>(O/W)</span></label>
            <input type="range" id="p1z" min="-150" max="150" value="10">
        </div>

        <h4>Vliegtuig 2 (Zuid)</h4>
        <div class="control-group">
            <label>Positie X <span>(N/Z)</span></label>
            <input type="range" id="p2x" min="-150" max="150" value="60">
        </div>
        <div class="control-group">
            <label>Hoogte Y <span>(Altitude)</span></label>
            <input type="range" id="p2y" min="0" max="100" value="32">
        </div>
        <div class="control-group">
            <label>Positie Z <span>(O/W)</span></label>
            <input type="range" id="p2z" min="-150" max="150" value="40">
        </div>
    </div>

    <script type="importmap">
        { "imports": { "three": "https://unpkg.com/three@0.160.0/build/three.module.js" } }
    </script>

    <script type="module">
        import * as THREE from 'three';

        const scene = new THREE.Scene();
        scene.background = new THREE.Color(0xffffff);
        
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 3000);
        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(window.devicePixelRatio);
        document.body.appendChild(renderer.domElement);

        function createBoeing(color) {
            const group = new THREE.Group();
            // Fuselage (Length 4.85 = 48.5m)
            const body = new THREE.Mesh(new THREE.CylinderGeometry(0.25, 0.25, 4.85, 16), new THREE.MeshPhongMaterial({color, shininess: 80}));
            body.rotation.x = Math.PI / 2; group.add(body);
            // Wings (Span 4.76 = 47.6m)
            const wings = new THREE.Mesh(new THREE.BoxGeometry(4.76, 0.05, 1.2), new THREE.MeshPhongMaterial({color}));
            wings.position.z = 0.5; group.add(wings);
            // Tail
            const tail = new THREE.Mesh(new THREE.BoxGeometry(1.8, 0.05, 0.6), new THREE.MeshPhongMaterial({color}));
            tail.position.z = -2.1; group.add(tail);
            return group;
        }

        function createTower(height, color) {
            const group = new THREE.Group();
            const h = height / 10;
            const body = new THREE.Mesh(new THREE.BoxGeometry(6.34, h, 6.34), new THREE.MeshPhongMaterial({color, transparent: true, opacity: 0.9}));
            group.add(body);
            // Mechanical Bands (Skylobbies)
            [0.07, 0.4, 0.72, 0.98].forEach(yPos => {
                const band = new THREE.Mesh(new THREE.BoxGeometry(6.4, 0.6, 6.4), new THREE.MeshPhongMaterial({color: 0x222222}));
                band.position.y = (yPos * h) - (h/2); group.add(band);
            });
            return group;
        }

        const tower1 = createTower(416.97, 0xcccccc);
        tower1.position.set(-10, 20.85, -10); scene.add(tower1);

        const tower2 = createTower(415.14, 0x999999);
        tower2.position.set(10, 20.75, 10); scene.add(tower2);

        const plane1 = createBoeing(0x3366ff); scene.add(plane1);
        const plane2 = createBoeing(0xff3333); scene.add(plane2);

        const floor = new THREE.Mesh(new THREE.PlaneGeometry(1000, 1000), new THREE.MeshPhongMaterial({color: 0xeeeeee}));
        floor.rotation.x = -Math.PI / 2; scene.add(floor);

        const light = new THREE.DirectionalLight(0xffffff, 1.8);
        light.position.set(100, 200, 100); scene.add(light);
        scene.add(new THREE.AmbientLight(0x999999));

        // UI Selectors
        const s = {
            speed: document.getElementById('speedSlider'),
            p1x: document.getElementById('p1x'), p1y: document.getElementById('p1y'), p1z: document.getElementById('p1z'),
            p2x: document.getElementById('p2x'), p2y: document.getElementById('p2y'), p2z: document.getElementById('p2z')
        };

        let angle = 0;
        function animate() {
            requestAnimationFrame(animate);
            
            angle += parseFloat(s.speed.value);
            camera.position.x = 200 * Math.cos(angle);
            camera.position.z = 200 * Math.sin(angle);
            camera.position.y = 120;
            camera.lookAt(0, 30, 0);

            // Update Plane 1 position and orientation
            plane1.position.set(parseFloat(s.p1x.value), parseFloat(s.p1y.value), parseFloat(s.p1z.value));
            plane1.lookAt(tower1.position);
            
            // Update Plane 2 position and orientation
            plane2.position.set(parseFloat(s.p2x.value), parseFloat(s.p2y.value), parseFloat(s.p2z.value));
            plane2.lookAt(tower2.position);

            renderer.render(scene, camera);
        }
        animate();

        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });
    </script>
</body>
</html>
